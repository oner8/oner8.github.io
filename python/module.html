<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="DAN.yu"><title>pythonå¸¸ç”¨æ¨¡å—æ•´ç† Â· å®‰ä¸æ˜Ÿæ²³</title><meta name="description" content="æœ¬ç¯‡æ–‡ç« æ•´ç†äº†å­¦ä¹ Pythonä¸­ç”¨æ¨¡å—å’Œå¡«è¿‡çš„å‘,å¸Œæœ›æˆ‘æ•´ç†çš„å†…å®¹å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚



è¯»å–excelè¡¨æ ¼xlslæ–‡ä»¶#è¯»å–xlslæ–‡ä»¶åˆ°åˆ—è¡¨
import xlrd
def read_xlsl(filename):    #filenameä¸ºæ–‡ä»¶åç§°
    excel=xlrd.open_wo"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="//cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/valine.min.js"></script><meta name="generator" content="Hexo 4.2.0"></head><body><span class="donate-address">å”¯ä¸€æŒ‡å®šé‚®ç®±ï¼ši#wrdan.com</span><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">å¤«å”¯ä¸äº‰ï¼Œæ•…å¤©ä¸‹è«èƒ½ä¸ä¹‹äº‰</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">å®‰ä¸æ˜Ÿæ²³</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">é¦–é¡µ</a></li><li><a href="/archives">å½’æ¡£</a></li><li><a href="/categories">åˆ†ç±»</a></li><li><a href="/tags">æ ‡ç­¾</a></li><li><a href="/about/index.html">å…³äº</a></li><li><a href="/links/index.html">å‹é“¾</a></li><li class="soc"><a href="https://github.com/wrdan" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="https://twitter.com/dannyw" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter">&nbsp;</i></a><a href="https://wrdan.com/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2020&nbsp;<a target="_blank" href="https://wrdan.com" rel="noopener noreferrer">DAN.yu</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>pythonå¸¸ç”¨æ¨¡å—æ•´ç†</a></p><p class="post-meta"><span class="date meta-item">å‘å¸ƒäº&nbsp;2018-04-22</span><span class="meta-item"><i class="fa fa-folder"></i><span>&nbsp;</span><a href="/categories/python/" title="python" class="a-tag">python</a><span>&nbsp;</span></span></p><p class="post-abstract"><p>æœ¬ç¯‡æ–‡ç« æ•´ç†äº†å­¦ä¹ Pythonä¸­ç”¨æ¨¡å—å’Œå¡«è¿‡çš„å‘,å¸Œæœ›æˆ‘æ•´ç†çš„å†…å®¹å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p>
<a id="more"></a>


<h2 id="è¯»å–excelè¡¨æ ¼xlslæ–‡ä»¶"><a href="#è¯»å–excelè¡¨æ ¼xlslæ–‡ä»¶" class="headerlink" title="è¯»å–excelè¡¨æ ¼xlslæ–‡ä»¶"></a>è¯»å–excelè¡¨æ ¼xlslæ–‡ä»¶</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#è¯»å–xlslæ–‡ä»¶åˆ°åˆ—è¡¨</span>
<span class="token keyword">import</span> xlrd
<span class="token keyword">def</span> <span class="token function">read_xlsl</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true">#filenameä¸ºæ–‡ä»¶åç§°</span>
    excel<span class="token operator">=</span>xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span><span class="token string">'{0}'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># è·å–ç¬¬ä¸€ä¸ªsheet</span>
    table <span class="token operator">=</span> excel<span class="token punctuation">.</span>sheets<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># è¿™å„¿çš„0ä¸ºexcelæ–‡ä»¶ä¸­sheetçš„ç´¢å¼•ï¼ˆç¬¬1ä¸ªï¼‰</span>
    <span class="token comment" spellcheck="true"># æ‰“å°ç¬¬iè¡Œæ•°æ®</span>
    <span class="token comment" spellcheck="true"># print(sheet.row_values(i))</span>
    <span class="token comment" spellcheck="true"># æ‰“å°ç¬¬jåˆ—æ•°æ®</span>
    <span class="token comment" spellcheck="true"># print(sheet.col_values(j))</span>
    rows_count<span class="token operator">=</span>table<span class="token punctuation">.</span>nrows    <span class="token comment" spellcheck="true">#è¡Œæ•°</span>
    data_list<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>rows_count<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment" spellcheck="true"># print(table.row_values(i))</span>
        data_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>table<span class="token punctuation">.</span>row_values<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># print(data_list[0])</span>
    <span class="token keyword">return</span> data_list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æˆ–è€…è¯»å–åˆ°ç”Ÿæˆå™¨ä¹‹ä¸­</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#è¯»å–xlslæ–‡ä»¶åˆ°åˆ—è¡¨</span>
<span class="token keyword">import</span> xlrd
<span class="token keyword">def</span> <span class="token function">read_xlsl</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true">#filenameä¸ºæ–‡ä»¶åç§°</span>
    excel<span class="token operator">=</span>xlrd<span class="token punctuation">.</span>open_workbook<span class="token punctuation">(</span><span class="token string">'{0}'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true"># è·å–ç¬¬ä¸€ä¸ªsheet</span>
    table <span class="token operator">=</span> excel<span class="token punctuation">.</span>sheets<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>   <span class="token comment" spellcheck="true"># è¿™å„¿çš„0ä¸ºexcelæ–‡ä»¶ä¸­sheetçš„ç´¢å¼•ï¼ˆç¬¬1ä¸ªï¼‰</span>
    rows_count<span class="token operator">=</span>table<span class="token punctuation">.</span>nrows    <span class="token comment" spellcheck="true">#è¡Œæ•°</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>rows_count<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> table<span class="token punctuation">.</span>row_values<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="è¯»å–csvæ–‡ä»¶"><a href="#è¯»å–csvæ–‡ä»¶" class="headerlink" title="è¯»å–csvæ–‡ä»¶"></a>è¯»å–csvæ–‡ä»¶</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># è¯»å–csvæ–‡ä»¶åˆ°åˆ—è¡¨ä¹‹ä¸­</span>
<span class="token keyword">import</span> csv
<span class="token keyword">def</span> <span class="token function">read_csv</span><span class="token punctuation">(</span>file_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> open<span class="token punctuation">(</span>file_name<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
        data_list <span class="token operator">=</span> <span class="token punctuation">[</span>a_line <span class="token keyword">for</span> a_line <span class="token keyword">in</span> csv_reader<span class="token punctuation">]</span>
    <span class="token keyword">return</span> data_list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æˆ–è€…è¯»å–csvæ–‡ä»¶åˆ°ç”Ÿæˆå™¨ä¹‹ä¸­</p>
<pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#è¯»å–csvæ–‡ä»¶åˆ°ç”Ÿæˆå™¨ä¹‹ä¸­</span>
<span class="token keyword">def</span> <span class="token function">read_csv</span><span class="token punctuation">(</span>file_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> open<span class="token punctuation">(</span>file_name<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
        <span class="token keyword">for</span> a_line <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
            <span class="token keyword">yield</span> a_line<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å°†åˆ—è¡¨é›†å†™å…¥åˆ°csvæ–‡ä»¶"><a href="#å°†åˆ—è¡¨é›†å†™å…¥åˆ°csvæ–‡ä»¶" class="headerlink" title="å°†åˆ—è¡¨é›†å†™å…¥åˆ°csvæ–‡ä»¶"></a>å°†åˆ—è¡¨é›†å†™å…¥åˆ°csvæ–‡ä»¶</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#å†™å…¥åˆ°csvæ–‡ä»¶</span>
<span class="token keyword">import</span> csv<span class="token punctuation">,</span>datetime
<span class="token comment" spellcheck="true"># å†™å…¥åˆ°csv æ–‡ä»¶çš„å‡½æ•°</span>
<span class="token keyword">def</span> <span class="token function">csv_writer_list</span><span class="token punctuation">(</span>key_word<span class="token punctuation">,</span>data_list<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment" spellcheck="true"># do_you_really_fuck_know_list = list(set(know_list) &amp; set(data_list))</span>
    <span class="token comment" spellcheck="true"># print(len(do_you_really_fuck_know_list))</span>
    <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">'{0}_{1}.csv'</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>key_word<span class="token punctuation">,</span>datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y_%m_%d_%H_%M_%S"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\
                                     <span class="token string">'w'</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
        <span class="token keyword">for</span> a_line <span class="token keyword">in</span> data_list<span class="token punctuation">:</span>
            writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>a_line<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># a_line ä¸ºä¸€ä¸ªåˆ—è¡¨</span>
```python

ç¤ºä¾‹ï¼š
```python
<span class="token comment" spellcheck="true"># ä¸€ä¸ªç®€å•çš„å°æ —å­</span>
data_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
csv_writer_list<span class="token punctuation">(</span><span class="token string">'æ•°å­—ç¤ºä¾‹'</span><span class="token punctuation">,</span>data_list<span class="token punctuation">)</span>
```python

<span class="token comment" spellcheck="true">## åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦</span>

```python
<span class="token comment" spellcheck="true"># æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦ æ˜¯ï¼šTrue ï¼› å¦ï¼šFalse</span>
<span class="token keyword">import</span> re
zhPattern <span class="token operator">=</span> re<span class="token punctuation">.</span>compile<span class="token punctuation">(</span>u<span class="token string">'[\u4e00-\u9fa5]+'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">has_chinese</span><span class="token punctuation">(</span>a_string<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> zhPattern<span class="token punctuation">.</span>search<span class="token punctuation">(</span>a_string<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
```python

<span class="token comment" spellcheck="true">##  å‡ å¤©ä¹‹å‰æˆ–åçš„æ—¥æœŸï¼ˆæ¯”å¦‚ä¸‰å¤©ä¹‹å‰æ˜¯å‡ å¹´å‡ æœˆå‡ å·ï¼‰</span>

```python
<span class="token comment" spellcheck="true"># è¿”å›å‡ å¤©å‰æˆ–åçš„æ—¥æœŸ</span>
<span class="token keyword">import</span> datetime
<span class="token keyword">def</span> <span class="token function">the_start_date</span><span class="token punctuation">(</span>days_to_reduce <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">,</span> ago <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    :å‚æ•° days_to_reduce: å¤©æ•°
    :å‚æ•° ago: Trueä»£è¡¨å‡ å¤©å‰çš„æ—¥æœŸï¼ŒFalseä»£è¡¨å‡ å¤©åçš„æ—¥æœŸ
    :è¿”å›: æ ¼å¼ç±»ä¼¼äºï¼šâ€˜2017-05-30â€™çš„å­—ç¬¦ä¸²
    '''</span>
    today_time <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#.strftime("%Y-%m-%d") # ä»Šå¤©çš„æ—¥æœŸ</span>
    dec_days_to_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span>days_to_reduce<span class="token punctuation">)</span>
    <span class="token keyword">if</span> ago<span class="token punctuation">:</span>
        start_day <span class="token operator">=</span> today_time <span class="token operator">-</span> dec_days_to_date
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        start_day <span class="token operator">=</span> today_time <span class="token operator">+</span> dec_days_to_date
    <span class="token keyword">return</span> start_day
```python
å°æ —å­ï¼š
```python
<span class="token keyword">print</span><span class="token punctuation">(</span>the_start_date<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">#3å¤©å‰çš„å¹´æœˆæ—¥</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>the_start_date<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#3å¤©åçš„å¹´æœˆæ—¥</span>
```python

<span class="token comment" spellcheck="true">## mysql å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ—¥æœŸçš„ä¸¤ä¸ªå‡½æ•°ï¼šdate_format() ä¸ str_to_date()</span>

<span class="token comment" spellcheck="true">## pythonå­—å…¸æ’åº</span>
```python
<span class="token comment" spellcheck="true"># å­—å…¸æ’åº ï¼ˆè¿”å›å€¼ä¸ºæ’åˆ—åçš„åˆ—è¡¨ï¼‰</span>
tuple_list <span class="token operator">=</span> sorted<span class="token punctuation">(</span>a_dic<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># å­—å…¸æŒ‰ç…§å€¼æ’åº å¹¶ç¿»è½¬</span>
```python

<span class="token comment" spellcheck="true">## BeautifulSoupä¸­ï¼Œè°ƒç”¨tagçš„ find_all() æ–¹æ³•æ—¶,Beautiful Soupä¼šæ£€ç´¢å½“å‰tagçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹,å¦‚æœåªæƒ³æœç´¢tagçš„ç›´æ¥å­èŠ‚ç‚¹,å¯ä»¥ä½¿ç”¨å‚æ•° recursive=False ï¼›find_next()ç”¨äºæ‰¾åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾ï¼Œç”¨æ³•ï¼šå½“å‰soupå…ƒç´ .find_next(â€˜aâ€™)    # æ‰¾åˆ°å½“å‰æ ‡ç­¾ä¸‹ä¸€ä¸ªaå…ƒç´ </span>



<span class="token comment" spellcheck="true">## datetimeæ—¶é—´ä¸å­—ç¬¦ä¸²ä¹‹é—´ç›¸äº’è½¬åŒ–</span>

```python
<span class="token comment" spellcheck="true"># datetimeç±»å‹ä¸å­—ç¬¦ä¸²ç›¸äº’è½¬åŒ–</span>
<span class="token keyword">import</span> datetime<span class="token punctuation">,</span>time

<span class="token comment" spellcheck="true"># 1ï¼šdatetime -> string</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 2ï¼šstring -> datetime</span>
<span class="token comment" spellcheck="true"># å­—ç¬¦ä¸²æ ¼å¼æˆ–è€…æ—¥æœŸä¸å¯¹ ä¼šæŠ¥é”™</span>
datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>strptime<span class="token punctuation">(</span><span class="token string">"2017-5-30 18:20:10"</span><span class="token punctuation">,</span> <span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># 3ï¼š è·å–å½“å‰çš„æ—¶é—´</span>
time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span> <span class="token string">'%Y-%m-%d %X'</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
```python

<span class="token comment" spellcheck="true">## mysql  instr()å’Œ find_in_set()çš„ç”¨æ³•</span>

```mysql
select <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨åç§° where instr<span class="token punctuation">(</span>åˆ—åç§°<span class="token punctuation">,</span><span class="token string">'æ•™è‚²'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
select <span class="token operator">*</span> <span class="token keyword">from</span> è¡¨åç§° where find_in_set<span class="token punctuation">(</span><span class="token string">'æ•™è‚²'</span><span class="token punctuation">,</span>åˆ—åç§°<span class="token punctuation">)</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ–°å»ºä¸€ä¸ª"><a href="#åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ–°å»ºä¸€ä¸ª" class="headerlink" title="åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ–°å»ºä¸€ä¸ª"></a>åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ–°å»ºä¸€ä¸ª</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true"># åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ–°å»ºä¸€ä¸ª</span>
<span class="token keyword">import</span> os
<span class="token keyword">def</span> <span class="token function">is_folder_exist</span><span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment" spellcheck="true"># folder_path = os.path.join(os.getcwd(),æ–‡ä»¶å¤¹åç§°)</span>
    <span class="token comment" spellcheck="true"># os.getcwd() å¯ä»¥è·å¾—å½“å‰è·¯å¾„</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span>folder_path<span class="token punctuation">)</span>
```python

<span class="token comment" spellcheck="true">## ä»ç½‘ç»œä¸‹è½½å›¾ç‰‡çš„æ¨¡å—</span>

```python
<span class="token keyword">import</span> os<span class="token punctuation">,</span>requests
<span class="token comment" spellcheck="true">#ä¸‹è½½å›¾ç‰‡åˆ°å¯¹åº”æ–‡ä»¶å¤¹</span>
<span class="token keyword">def</span> <span class="token function">img_downloader</span><span class="token punctuation">(</span>img_url<span class="token punctuation">,</span>folder_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    :å‚æ•° img_url: å›¾ç‰‡è·¯å¾„
    :å‚æ•° folder_path: ä¿å­˜åœ¨æ–‡ä»¶å¤¹è·¯å¾„
    :è¿”å›å€¼: ä¿å­˜çš„å›¾ç‰‡çš„è·¯å¾„
    """</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> img_url<span class="token punctuation">:</span>
        <span class="token keyword">return</span> None
    img_name<span class="token operator">=</span>img_url<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token comment" spellcheck="true">#è¿™åœ°æ–¹æœ€å¥½åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨ è¿™é‡Œå°±ä¸åšåˆ¤æ–­äº†</span>
    filename<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>folder_path<span class="token punctuation">,</span>img_name<span class="token punctuation">)</span>
    <span class="token comment" spellcheck="true">#å£°æ˜headerï¼Œä¼ªè£…æˆæµè§ˆå™¨</span>
    headers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"user-agent"</span><span class="token punctuation">:</span><span class="token string">"Mozilla/5.0 (windows NT6.1;WOW64 ; rv:42 ) Gecko/20100101 Firefox/42.0"</span><span class="token punctuation">}</span>
    session_req<span class="token operator">=</span>requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#æ„é€ ä¸€ä¸ªå…¼å®¹cookieçš„è¯·æ±‚</span>
    image<span class="token operator">=</span>session_req<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>img_url<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">#å‘urlå‘é€getè¯·æ±‚ï¼Œè·å–æ•´ä¸ªé¡µé¢,verify=Falseæ’é™¤sslè®¤è¯</span>
    <span class="token comment" spellcheck="true"># image=session_req.get(img_url,verify=False)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> open<span class="token punctuation">(</span>filename <span class="token punctuation">,</span><span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> img<span class="token punctuation">:</span>
            <span class="token comment" spellcheck="true"># print(image.content)</span>
            img<span class="token punctuation">.</span>write<span class="token punctuation">(</span>image<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
            <span class="token comment" spellcheck="true"># return</span>
    <span class="token keyword">except</span> IOError<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"IO Error\n"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token keyword">return</span> filename
```python

ä¸€ä¸ªå°æ —å­ï¼šä¸‹è½½å›¾ç‰‡åˆ°å½“å‰è·¯å¾„ä¸‹

```python
<span class="token comment" spellcheck="true"># ä¸‹è½½å›¾ç‰‡åˆ°å½“å‰è·¯å¾„ä¸‹</span>
a <span class="token operator">=</span> img_downloader<span class="token punctuation">(</span><span class="token string">'http://www.ziyoubaba.com/wp-content/uploads/2016/03/house.jpg'</span><span class="token punctuation">,</span>os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
```python

<span class="token comment" spellcheck="true">##  åˆ¤æ–­sqlæ•°æ®åº“è¡¨ä¸­æŸåˆ—ä¸­æ˜¯å¦æœ‰æŸä¸ªå€¼</span>

```python
<span class="token comment" spellcheck="true"># åˆ¤æ–­sqlæ•°æ®åº“è¡¨ä¸­æŸåˆ—ä¸­æ˜¯å¦æœ‰æŸä¸ªå€¼</span>
<span class="token keyword">def</span> <span class="token function">is_in_db</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> table_name<span class="token punctuation">,</span> col_name <span class="token punctuation">,</span> the_value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sql <span class="token operator">=</span> <span class="token string">"select count(*) from table_name where col_name= {0}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>the_value<span class="token punctuation">)</span>
    cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
    result_raw <span class="token operator">=</span> cur<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
    number <span class="token operator">=</span> result_raw<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">if</span> result_raw <span class="token keyword">else</span> <span class="token number">0</span>
    <span class="token keyword">if</span> number <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>    <span class="token comment" spellcheck="true"># ä¸å­˜åœ¨</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>    <span class="token comment" spellcheck="true"># å­˜åœ¨</span>
```python


<span class="token comment" spellcheck="true">##  sqlè¯­å¥ä¸­å»é™¤ None</span>

```python
<span class="token comment" spellcheck="true"># ä¸é‡è¦ï¼ˆè¯·ä¸è¦çœ‹è¿™ä¸€æ¡ï¼‰</span>
sql <span class="token operator">=</span> sql<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"'None'"</span><span class="token punctuation">,</span> <span class="token string">'null'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'None'</span><span class="token punctuation">,</span> <span class="token string">'null'</span><span class="token punctuation">)</span>
```python

<span class="token comment" spellcheck="true">## æ•°æ®åº“æŸ¥è¯¢é‡å¤</span>

```MySQL
select id<span class="token punctuation">,</span>count<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> total <span class="token keyword">from</span> è¡¨ group by å­—æ®µ having total<span class="token operator">></span><span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å¯ä»¥è·å–æœ¬æœºçš„ipåœ°å€çš„ç½‘ç«™"><a href="#å¯ä»¥è·å–æœ¬æœºçš„ipåœ°å€çš„ç½‘ç«™" class="headerlink" title="å¯ä»¥è·å–æœ¬æœºçš„ipåœ°å€çš„ç½‘ç«™"></a>å¯ä»¥è·å–æœ¬æœºçš„ipåœ°å€çš„ç½‘ç«™</h2><p>```python<br>â€œâ€â€<br><a href="http://httpbin.org/ip" target="_blank" rel="noopener">http://httpbin.org/ip</a><br><a href="http://httpbin.org/get" target="_blank" rel="noopener">http://httpbin.org/get</a><br><a href="http://icanhazip.com/" target="_blank" rel="noopener">http://icanhazip.com/</a><br><a href="https://api.ip.sb/jsonip" target="_blank" rel="noopener">https://api.ip.sb/jsonip</a><br><a href="http://ip.chinaz.com/getip.aspx" target="_blank" rel="noopener">http://ip.chinaz.com/getip.aspx</a><br>â€œâ€â€</p>
<p>```python</p>
<p>å¾…è¡¥å……â€¦.</p>
</p></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/share/tracker-server-list.html" title="ã€å¹²è´§ã€‘TrackeræœåŠ¡å™¨åˆ—è¡¨"><i class="fa fa-angle-double-left"></i>&nbsp;ä¸Šä¸€ç¯‡: ã€å¹²è´§ã€‘TrackeræœåŠ¡å™¨åˆ—è¡¨</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/share/oneindex-1.html" title="OneIndex 2 0  å¤§ç‰ˆæœ¬æ›´æ–°  çº¯èµ° OneDrive æµé‡çš„ç½‘ç›˜å‰ç«¯ç¨‹åº">ä¸‹ä¸€ç¯‡: OneIndex 2 0  å¤§ç‰ˆæœ¬æ›´æ–°  çº¯èµ° OneDrive æµé‡çš„ç½‘ç›˜å‰ç«¯ç¨‹åº&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div><a id="comments"></a><div id="valine-container"></div><script>(function(){
    if(typeof Valine !== 'undefined'){
        new Valine({
            el:'#valine-container',
            appId: 'SphQyGolSRFHnBWzGGz4XeLE-gzGzoHsz',
            appKey: 'gMqbeGAx90w5NF4G4R43I0UD',
            placeholder: 'å¿«æ¥è¯„è®ºå§ğŸ˜€',
            path: window.location.pathname
        })
    }
}())
</script></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2020&nbsp;<a target="_blank" href="https://wrdan.com" rel="noopener noreferrer">DAN.yu</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Proudly published with&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/tj.js"></script><script src="/js/typography.min.js"></script><script src="https://cdn.bootcss.com/dplayer/1.25.0/DPlayer.min.js"></script><link rel="stylesheet" href="https://cdn.bootcss.com/dplayer/1.25.0/DPlayer.min.css"></body></html>